{"version":3,"sources":["components/rb-header.js","components/rb-pin.js","components/rb-popup.js","components/rb-map.js","components/rb-supply-chain.js","components/rb-story-explorer.js","lib/helpers.js","contexts/stories-context.js","partials/risk-home.js","components/rb-line-chart.js","partials/incident-detail.js","App.js","serviceWorker.js","index.js"],"names":["components_rb_header","react_default","a","createElement","className","href","concat","process","src","pinStyle","fill","stroke","RBPin","_this$props","this","props","_this$props$size","size","onHover","height","viewBox","style","onMouseEnter","d","PureComponent","text","value","RBMap","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","viewport","width","latitude","longitude","zoom","popupInfo","asset","assetName","locationName","location","_asset$location$0$coo","coordinates","_this2","arguments","length","undefined","assets","stories","markers","assetMarkers","map","i","markerData","getAssetLocationData","esm","key","offsetTop","offsetLeft","onDragStart","_onMarkerDragStart","onDrag","_onMarkerDrag","onDragEnd","_onMarkerDragEnd","rb_pin_RBPin","setState","push","storyMarkers","story","long","lat","_this3","tipSize","anchor","closeOnClick","onClose","rb_popup_RBPin","_this4","assign","scrollZoom","onViewportChange","_renderPins","_renderPopup","Component","defaultProps","RBSupplyChain","RBStoryExplorer","selectedLocation","filter","toLowerCase","slice","getStorySelection","Link","to","id","shortSummary","renderFilteredStories","transformStoryData","storyData","flatStories","storyUrls","keys","forEach","k","input","stack","toConsumableArray","res","next","pop","Array","isArray","apply","reverse","flatten","j","modifiedStory","includes","url","sort","b","score","SharedStoriesContext","React","createContext","SharedStoriesProvider","_Component","getStoryDetail","console","log","getStoriesForSameLocation","storiesData","inherits","createClass","children","Provider","SharedStoriesConsumer","Consumer","RiskHome","_ref","components_rb_map","lib","fluid","lg","components_rb_supply_chain","components_rb_story_explorer","ReactChartkick","addAdapter","Chart","rb_line_chart","data","react_chartkick_esm","groupedData","datum","groupDataByWeek","THAI_LABOR_COUNTS","results","counts","count","date","total_count","IncidentDetail","storyId","queryString","parse","search","incident","mainStory","otherStories","supplyChainData","App","BrowserRouter","basename","stories_context_SharedStoriesProvider","Route","exact","path","render","partials_risk_home","component","Boolean","window","hostname","match","ReactDOM","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.0a034518.chunk.js","sourcesContent":["import React from 'react';\nimport { Grid, Row, Col } from 'react-flexbox-grid';\nimport '../styles/rb-header.scss';\n\nexport default () => {\n\treturn (\n\t\t<header className=\"rb-header\">\n\t\t\t<div className=\"rb-header-logo\">\n\t\t\t\t<a href={`${process.env.PUBLIC_URL}`}><img src={`${process.env.PUBLIC_URL}/riskLogo.jpg`} /></a>\n\t\t\t</div>\n\t\t</header>\n\t);\n}","import React, {PureComponent} from 'react';\n\nconst ICON = `M20.2,15.7L20.2,15.7c1.1-1.6,1.8-3.6,1.8-5.7c0-5.6-4.5-10-10-10S2,4.5,2,10c0,2,0.6,3.9,1.6,5.4c0,0.1,0.1,0.2,0.2,0.3\n  c0,0,0.1,0.1,0.1,0.2c0.2,0.3,0.4,0.6,0.7,0.9c2.6,3.1,7.4,7.6,7.4,7.6s4.8-4.5,7.4-7.5c0.2-0.3,0.5-0.6,0.7-0.9\n  C20.1,15.8,20.2,15.8,20.2,15.7z`;\n\nconst pinStyle = {\n  fill: '#d00',\n  stroke: 'none'\n};\n\nexport default class RBPin extends PureComponent {\n\n  render() {\n    const {size = 20, onHover} = this.props;\n\n    return (\n      <svg\n        height={size}\n        viewBox=\"0 0 24 24\"\n        style={pinStyle}\n        onMouseEnter={onHover}\n      >\n        <path d={ICON}/>\n      </svg>\n    );\n  }\n}\n","import React, {PureComponent} from 'react';\n\nexport default class RBPin extends PureComponent {\n\n  render() {\n    const { text, \n            value } = this.props;\n    return (\n      <div>\n        <div className=\"rb-popup-title\">{text}</div>\n        <div className=\"rb-popup-value\">{value}</div>\n      </div>\n    );\n  }\n}","import React, {Component} from 'react';\nimport ReactMapGL, {Marker, Popup} from 'react-map-gl';\nimport RBPin from './rb-pin.js';\nimport RBPopup from './rb-popup.js';\nimport '../styles/rb-map.scss';\n\nclass RBMap extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      viewport: {\n        width: '100%',\n        height: 400,\n        latitude: props.latitude,\n        longitude: props.longitude,\n        zoom: props.zoom\n      },\n      popupInfo: null\n    };\n  }\n\n  getAssetLocationData(asset) {\n    // Just grabbing the first location, will have to revisit this\n    // when we have a better sense of our unit of analysis\n    const {assetName, value} = asset;\n    const locationName = asset.location[0].locationName;\n    const {latitude, longitude} = asset.location[0].coordinates[0];\n    return {\n      assetName,\n      value,\n      latitude,\n      longitude,\n      locationName\n    };\n  }\n\n  _renderPins(props=this.props) {\n    const {assets, stories} = props;\n    const markers = [];\n    if (assets.length > 0) {\n      const assetMarkers = assets.map((asset, i) => {\n        const markerData = this.getAssetLocationData(asset);\n        const { longitude, latitude, assetName, value, locationName } = markerData;\n        return (\n          <Marker\n            key={`a-${i}`}\n            latitude={+latitude} longitude={+longitude}\n            offsetTop={-20} offsetLeft={-10}\n            onDragStart={this._onMarkerDragStart}\n            onDrag={this._onMarkerDrag}\n            onDragEnd={this._onMarkerDragEnd}\n          >\n          <RBPin size={20} \n            onHover={\n              () => this.setState(\n                  { \n                    popupInfo: {\n                      latitude: +latitude,\n                      longitude:+longitude,\n                      text: `${locationName}: ${assetName}`,\n                      value\n                    }\n                  }  \n              )\n            } \n          />\n          </Marker>\n        );\n      })\n      markers.push(assetMarkers);\n    }\n    if (stories.length > 0) {\n      const storyMarkers = stories.map((story, i) => {\n        const { long, lat } = story;\n        return (\n          <Marker\n            key={`s-${i}`}\n            latitude={+lat} longitude={+long}\n            offsetTop={-20} offsetLeft={-10}\n            onDragStart={this._onMarkerDragStart}\n            onDrag={this._onMarkerDrag}\n            onDragEnd={this._onMarkerDragEnd}\n          >\n            <RBPin size={20} onHover={\n              () => this.setState(\n                {\n                  popupInfo: {\n                    latitude: +lat,\n                    longitude:+long,\n                    text: 'story'\n                  }\n                }\n              )\n            } />\n          </Marker>\n        );\n      })\n      markers.push(storyMarkers);\n    }\n    return markers;\n  }\n\n  _renderPopup() {\n    const {popupInfo} = this.state;\n\n    return popupInfo && (\n      <Popup tipSize={5}\n        anchor=\"top\"\n        longitude={popupInfo.longitude}\n        latitude={popupInfo.latitude}\n        closeOnClick={true}\n        onClose={() => this.setState({popupInfo: null})} >\n        <RBPopup {...popupInfo} />\n      </Popup>\n    );\n  }\n\n  render() {\n    const {assets} = this.props;\n    return (\n      <div className=\"rb-map\">\n        <ReactMapGL\n          {...this.state.viewport}\n          scrollZoom={false}\n          onViewportChange={(viewport) => this.setState({viewport})}\n        >\n          { this._renderPins(this.props) }\n          { this._renderPopup() }\n        </ReactMapGL>\n      </div>\n    );\n  }\n}\n\nRBMap.defaultProps = {\n  assets: [],\n  stories:[],\n  latitude: 13.5605834,\n  longitude: 19.927948,\n  zoom: 1.56\n};\n\nexport default RBMap;\n","import React, { Component } from 'react';\nimport '../styles/rb-supply-chain.scss';\n\n/**\nsupplyChainData = [\n  {\n    location:[{\n        locationName: \"Location\",\n        coordinates: { lat: 0, long: 0 }\n      },..\n    ]\n    assets: \"Asset Name\",\n    value: \"int\",\n    description: \"description text\",\n  } ...\n];\n**/\n\nclass RBSupplyChain extends Component {\n  render() {\n    const {assets} = this.props;\n    return (\n      <div className=\"rb-supply-chain-wrapper\">\n        <div className=\"rb-supply-list\">\n          <h2 className=\"rb-section-title\">Supply Chain</h2>\n          <ul>\n            {assets.map((asset, i) => {\n              const assetName = asset.assetName;\n              const locationName = asset.location[0].locationName;\n              return (\n                <li key={i}>\n                  <i className=\"fas fa-caret-right rb-list-icon\"></i>\n                  {`${locationName} - ${assetName}`}\n                </li>);\n            })}\n          </ul>\n        </div>\n      </div>\n    );\n  }\n}\n\nRBSupplyChain.defaultProps = {\n  assets: []\n};\n\nexport default RBSupplyChain;\n","import React, { Component } from 'react';\nimport {Link} from \"react-router-dom\";\nimport '../styles/rb-story-explorer.scss';\n\nclass RBStoryExplorer extends Component {\n  getStorySelection(stories, selectedLocation) {\n    return selectedLocation ?\n      stories\n        .filter((story) => { return story.locationName.toLowerCase() === selectedLocation; }) \n        .slice(0, 10) :\n      stories.slice(0, 5);\n\n  }\n\n  renderFilteredStories(props=this.props) {\n    const {stories, selectedLocation} = props;\n    const filteredStories = this.getStorySelection(stories, selectedLocation)\n    return filteredStories.map((story, i) => {\n      return (\n        <li key={i}><Link to={`/incidents?incident=${story.id}`}><span className=\"rb-capitalize\">{story.location}</span> Story {i + 1}</Link>: {story.shortSummary}</li>\n      );\n    })\n  }\n\n  render() {\n    const {stories, selectedLocation} = this.props;\n    return (\n      <div className=\"rb-story-explorer-wrapper\">\n        <div className=\"rb-story-list\">\n          <h2 className=\"rb-section-title\">Story List</h2>\n          <ul>\n            {this.renderFilteredStories()}\n          </ul>\n        </div>\n      </div>\n    );\n  }\n}\n\nRBStoryExplorer.defaultProps = {\n  stories: [],\n  selectedLocation: ''\n};\n\nexport default RBStoryExplorer;\n","function flatten(input) {\n  const stack = [...input];\n  const res = [];\n  while (stack.length) {\n    // pop value from stack\n    const next = stack.pop();\n    if (Array.isArray(next)) {\n      // push back array items, won't modify the original input\n      stack.push(...next);\n    } else {\n      res.push(next);\n    }\n  }\n  //reverse to restore input order\n  return res.reverse();\n}\n\n// Return flat array of stories and include the location as a key on each story\n// order by score, ascending (most negative stories first)\nexport function transformStoryData(storyData) {\n  const {stories} = storyData;\n  const flatStories = [];\n  const storyUrls = [];\n  Object.keys(stories).forEach((k, i) => {\n    flatten(stories[k]).forEach((story, j) => {\n      const shortSummary = `${story.text.slice(0,300)}...`;\n      const modifiedStory = Object.assign({}, story, {location: k, id: `${i}${j+1}`, shortSummary });\n      if (!storyUrls.includes(story.url)) {\n        flatStories.push(modifiedStory);\n        storyUrls.push(story.url);\n      }\n    })\n  })\n  const sortedFlatStories =\n    flatStories.sort((a, b) => {\n      if (a.score < b.score) {\n        return -1;\n      }\n      if (a.score > b.score) {\n        return 1;\n      }\n      return 0;\n    })\n  return sortedFlatStories;\n}\n\n\nexport function groupDataByWeek(data) {\n  let i = 0;\n  let groupedData = [];\n  data.forEach((datum) => {\n    if (i === 0) {\n      groupedData.push([datum[0], +datum[1]]);\n      console.log(groupedData);\n      i++;\n    } else if (i === 7) {\n      groupedData[groupedData.length-1][1] = groupedData[groupedData.length-1][1] + datum[1];\n      i = 0;\n    } else {\n      console.log(groupedData);\n      groupedData[groupedData.length-1][1] = groupedData[groupedData.length-1][1] + datum[1];\n      i++;\n    }\n  })\n  console.log(groupedData);\n  return groupedData;\n}","import React, { Component } from 'react';\nimport storiesData from '../data/stories.json';\nimport { transformStoryData } from '../lib/helpers.js';\n\nconst SharedStoriesContext = React.createContext();\n\nexport class SharedStoriesProvider extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      stories: transformStoryData(storiesData),\n    };\n  }\n\n  getStoryDetail = id => {\n    console.log(id);\n    return this.state.stories.filter((story) => { return story.id === id; })[0];\n  }\n\n  getStoriesForSameLocation = location => {\n    return this.state.stories.filter((story) => {return story.location === location; })\n  }\n\n\n  render() {\n    const { children } = this.props;\n    const { stories } = this.state;\n\n    return (\n      <SharedStoriesContext.Provider\n        value={{\n          stories,\n          getStoryDetail: this.getStoryDetail,\n          getStoriesForSameLocation: this.getStoriesForSameLocation\n        }}\n      >\n        {children}\n      </SharedStoriesContext.Provider>\n    );\n  }\n}\n\nexport const SharedStoriesConsumer = SharedStoriesContext.Consumer;\n","import React, { Component } from 'react';\nimport RBMap from '../components/rb-map.js';\nimport RBSupplyChain from '../components/rb-supply-chain.js';\nimport RBStoryExplorer from '../components/rb-story-explorer.js';\nimport { Grid, Row, Col } from 'react-flexbox-grid';\nimport { SharedStoriesConsumer } from '../contexts/stories-context.js';\nimport '../styles/risk-home.scss';\n\nclass RiskHome extends Component {\n  render() {\n    const {assets} = this.props;\n    return (\n      <SharedStoriesConsumer>\n        {({stories}) => (\n          <div className=\"rb-home-page rb-page\">\n            <h1 className=\"rb-page-title\">Operations Dashboard</h1>\n            <RBMap assets={assets}/>\n            <Grid fluid>\n              <Row>\n                <Col lg={4} className=\"rb-section-col\">\n                  <RBSupplyChain assets={assets} />\n                </Col>\n                <Col lg={8} className=\"rb-section-col\">\n                  <RBStoryExplorer stories={stories} />\n                </Col>\n              </Row>\n            </Grid>\n          </div>\n        )\n      }\n      </SharedStoriesConsumer>\n    );\n  }\n}\n\nRiskHome.defaultProps = {\n  assets: [],\n  stories: []\n};\n\nexport default RiskHome;\n","import React, { Component } from 'react';\nimport ReactChartkick, { AreaChart } from 'react-chartkick'\nimport Chart from 'chart.js'\n\nReactChartkick.addAdapter(Chart)\n\nexport default (props) => {\n\tconst data = props.data;\n\treturn <AreaChart data={data} />\n}","import React, { Component } from 'react';\nimport { Grid, Row, Col } from 'react-flexbox-grid';\nimport { SharedStoriesConsumer } from '../contexts/stories-context.js';\nimport RBMap from '../components/rb-map.js';\nimport '../styles/rb-incident-detail-page.scss';\nimport RBLineChart from '../components/rb-line-chart.js';\nimport THAI_LABOR_COUNTS from '../data/thai-labor-counts.json';\nimport { groupDataByWeek } from '../lib/helpers.js';\nimport queryString from 'query-string';\n\nconst data = THAI_LABOR_COUNTS.results.counts.map((count) => { return [count.date, count.total_count ] });\nconst groupedData = groupDataByWeek(data);\n\nclass IncidentDetail extends Component {\n  render() {\n    const {location} = this.props;\n    const storyId = queryString.parse(location.search).incident;\n    return (\n      <SharedStoriesConsumer>\n      {\n        ({getStoryDetail, getStoriesForSameLocation}) => {\n          const mainStory = getStoryDetail(storyId);\n          const otherStories = getStoriesForSameLocation(mainStory.location);\n          return (\n            <div className=\"rb-incident-detail-page rb-page\">\n              <h1 className=\"rb-page-title\">Thai Labor Dispute, Labor, Negative -3, 2 weeks</h1>\n              <Grid fluid>\n                <Row>\n                  <div className=\"rb-section\">\n                    <RBMap longitude={+mainStory.long} latitude={+mainStory.lat} zoom={4} stories={otherStories}/>\n                  </div>\n                </Row>\n                <Row>\n                  <div className=\"rb-section white\">\n                    <h2 className=\"rb-section-title\">Incident Analysis</h2>\n                    <RBLineChart data={groupedData} />\n                  </div>\n                </Row>\n                <Row>\n                  <div className=\"rb-section white\">\n                    <div className=\"rb-incident-information\">\n                      <div className=\"rb-incident-text\"><strong>Summary:</strong><br/>{mainStory.text}</div>\n                    </div>\n                    <div className=\"rb-past-incident\">\n                      <div className=\"rb-incident-text\"><strong>Past Instances:</strong><br/>Thai labor disputes was previously reported on July 25, July 11, and July 5 in local Thai media relating to bonded labor. Those incidences referred to bonded labor. Prior instances of labor abuses in the Thai fishing industry were reported by the Guardian newspaper in the UK.</div>\n                    </div>\n                  </div>\n                </Row>\n                <Row>\n                  <Col lg={7}>\n                    <div className=\"rb-risk-box\">\n                      <Row>\n                          <Col lg={3}><div className=\"rb-red-box\">High</div></Col>\n                          <Col lg={9}>\n                            <p>Risk of national and international Media:</p>\n                            <p>Such stories have been covered by international media in 2 years</p>\n                          </Col>\n                      </Row>\n                    </div>\n                  </Col>\n                  <Col lg={5}>\n                    <ul className=\"rb-recent-stories\">\n                      <b>Recent Stories</b>\n                      <li><a href=\"#\">25 workers rescued from a camp in Benjina</a></li>\n                      <li><a href=\"#\">25 workers rescued from a camp in Benjina</a></li>\n                      <li><a href=\"#\">25 workers rescued from a camp in Benjina</a></li>\n                    </ul>\n                  </Col>\n                </Row>\n              </Grid>\n            </div>\n          )\n        }\n      }\n      </SharedStoriesConsumer>\n    );\n  }\n}\n\nexport default IncidentDetail;\n","import React, { Component } from 'react';\nimport RBHeader from './components/rb-header.js';\nimport RiskHome from './partials/risk-home.js';\nimport IncidentDetail from './partials/incident-detail.js';\nimport supplyChainData from './data/supply-chain-data.json';\nimport { SharedStoriesProvider } from './contexts/stories-context.js';\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport { Grid, Row, Col } from 'react-flexbox-grid';\nimport 'normalize.css';\nimport './App.scss';\n\n\nconst {assets} = supplyChainData;\nclass App extends Component {\n  render() {\n    return (\n      <Router basename=\"/RiskBoardDemo\">\n        <SharedStoriesProvider>\n          <div className=\"RBApp rb-container\">\n            <RBHeader />\n            <Grid fluid>\n              <Row>\n                <Col className=\"rb-no-margin-col\" lg={2}>\n                  <div className=\"rb-side-section\">\n                    <ul className=\"rb-sidebar-menu\">\n                      <li><a href=\"#\"><span className=\"fa fa-home\"/>Analytics</a></li>\n                      <li><a href=\"#\"><span className=\"fa fa-users\"/>Profile</a></li>\n                      <li><a href=\"#\"><span className=\"fa fa-cog\"/>Settings</a></li>\n                    </ul>\n                  </div>\n                </Col>\n                <Col className=\"rb-no-margin-col\" lg={10}>\n                  <div className=\"rb-main-section\">\n                    <Route exact path=\"/\" render={(props)=> <RiskHome assets={assets} />} />\n                    <Route path=\"/incidents\" component={IncidentDetail} />\n                  </div>\n                </Col>\n              </Row>\n            </Grid>\n          </div>\n        </SharedStoriesProvider>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}